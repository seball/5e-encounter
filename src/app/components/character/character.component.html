<div
  class="character-card"
  [ngClass]="{ 'edit-mode': editMode, 'view-mode': !editMode }"
  #targetDiv>
  <div class="row">
    <div class="col-9">
      <div class="name-section">
        <div *ngIf="!editMode">{{ character.name }}</div>
        <input *ngIf="editMode" type="text" [(ngModel)]="character.name" />
      </div>

      <div class="hp-section">
        <div *ngIf="!editMode">
          HP: {{ character.currentHp }} / {{ character.maxHp }} | AC:
          {{ character.armorClass }}
        </div>
        <div *ngIf="editMode">
          <label for="currentHp">HP:</label>
          <input
            id="currentHp"
            type="number"
            [(ngModel)]="character.currentHp" />
          <label for="maxHp"> / </label>
          <input id="maxHp" type="number" [(ngModel)]="character.maxHp" />
          <span> | </span>
          <label for="armorClass">AC:</label>
          <input
            id="armorClass"
            type="number"
            [(ngModel)]="character.armorClass" />
        </div>
      </div>

      <div class="initiative-section">
        <div *ngIf="!editMode">
          Init: {{ character.initiative + character.initiativeModifier }} | Mod:
          {{ character.initiativeModifier | numberToString }} | Roll:
          {{ character.initiative }}
        </div>
        <div *ngIf="editMode">
          Init: {{ character.initiative + character.initiativeModifier }}
          <span> | </span>
          <label for="initiativeModifier">Mod:</label>
          <input
            id="initiativeModifier"
            type="number"
            [(ngModel)]="character.initiativeModifier" />
          <span> | </span>
          <label for="initiative">Roll:</label>
          <input
            id="initiative"
            type="number"
            [(ngModel)]="character.initiative" />
        </div>
      </div>
    </div>

    <div class="col-3">
      <div class="avatar">
        <img
          src="{{ character.avatarSrc }}"
          alt="Description of image"
          class="img-fluid" />
      </div>
    </div>
  </div>

  <div class="row justify-content-between">
    <div class="hp-adjustment col-6">
      <button (click)="heal()">Heal</button>
      <input type="number" [(ngModel)]="hpAdjustment" />
      <button (click)="damage()">Damage</button>
    </div>
  </div>
  <app-context-menu
    [targetElement]="targetDiv"
    [menuItems]="contextMenuItems"></app-context-menu>
</div>
